bayes {
  # Enable the classifier
  enabled = true;
  
  # Redis backend configuration
  backend = "redis";
  servers = "127.0.0.1:6379";
  
  # Auto-learning configuration
  autolearn = true;
  autolearn_threshold = 6.0;  # Messages with score >= 6.0 learn as spam
  autolearn_negative_threshold = -0.5;  # Messages with score <= -0.5 learn as ham
  
  # Minimum samples required for classification
  min_tokens = 11;
  min_words = 32;
  
  # Tokenizer settings for Telegram messages
  tokenizer {
    name = "osb";  # Orthogonal Sparse Bigrams
  }
  
  # Redis keys for storing tokens
  spam_cache = "bayes_spam";
  ham_cache = "bayes_ham";
  
  # Learning settings
  max_tokens = 1000;
  max_words = 10000;
  
  # Expiration settings
  expire = 7776000;  # 90 days
  
  # Learning probability thresholds
  spam_threshold = 0.9;
  ham_threshold = 0.1;
  
  # Statistics settings
  statfile {
    path = "/var/lib/rspamd/bayes.stat";
    type = "sqlite3";
  }
}
